# SQL SELECT Query Guide

A comprehensive guide covering various SELECT query techniques for retrieving, filtering, sorting, and aggregating data efficiently.

## Table of Contents

- [[#Comments|Comments]]
- [[#Basic Selection|Basic Selection]]
- [[#Filtering Data|Filtering Data]]
- [[#Sorting Results|Sorting Results]]
- [[#Grouping and Aggregation|Grouping and Aggregation]]
- [[#Advanced Filtering|Advanced Filtering]]
- [[#Unique Values|Unique Values]]
- [[#Limiting Results|Limiting Results]]
- [[#Complex Queries|Complex Queries]]
- [[#Advanced Features|Advanced Features]]

---

## Comments

SQL supports both single-line and multi-line comments:

```sql
-- This is a single-line comment

/* This
   is
   a multiple-line
   comment
*/
```

---

## Basic Selection

### Select All Columns

Use `*` to retrieve all columns from a table:

```sql
-- Retrieve All Customer Data
SELECT *
FROM customers;

-- Retrieve All Order Data
SELECT *
FROM orders;
```

### Select Specific Columns

Specify column names to retrieve only needed data:

```sql
-- Retrieve each customer's name, country, and score
SELECT 
    first_name,
    country, 
    score
FROM customers;
```

> [!tip] Performance Tip Always select specific columns instead of `*` when possible to improve query performance.

---

## Filtering Data

### WHERE Clause

Filter records based on specific conditions:

```sql
-- Retrieve customers with a score not equal to 0
SELECT *
FROM customers
WHERE score != 0;

-- Retrieve customers from Germany
SELECT *
FROM customers
WHERE country = 'Germany';

-- Retrieve specific columns with filtering
SELECT
    first_name,
    country
FROM customers
WHERE country = 'Germany';
```

---

## Sorting Results

### ORDER BY Clause

Sort results in ascending (ASC) or descending (DESC) order:

```sql
-- Sort by highest score first
SELECT *
FROM customers
ORDER BY score DESC;

-- Sort by lowest score first
SELECT *
FROM customers
ORDER BY score ASC;

-- Sort by country
SELECT *
FROM customers
ORDER BY country ASC;
```

### Multiple Column Sorting

```sql
-- Sort by country first, then by highest score
SELECT *
FROM customers
ORDER BY country ASC, score DESC;
```

### Combined Filtering and Sorting

```sql
-- Filter and sort combined
SELECT
    first_name,
    country,
    score
FROM customers
WHERE score != 0
ORDER BY score DESC;
```

---

## Grouping and Aggregation

### GROUP BY Clause

Group rows that have the same values and use aggregate functions:

```sql
-- Find the total score for each country
SELECT 
    country,
    SUM(score) AS total_score
FROM customers
GROUP BY country;

-- Multiple aggregations
SELECT 
    country,
    SUM(score) AS total_score,
    COUNT(id) AS total_customers
FROM customers
GROUP BY country;
```

> [!warning] Common Error When using GROUP BY, all non-aggregate columns in SELECT must be in the GROUP BY clause:
> 
> ```sql
> -- âŒ This will NOT work
> SELECT 
>     country,
>     first_name,  -- Error: not in GROUP BY
>     SUM(score) AS total_score
> FROM customers
> GROUP BY country;
> ```

---

## Advanced Filtering

### HAVING Clause

Filter grouped results (use after GROUP BY):

```sql
-- Countries with average score > 430
SELECT
    country,
    AVG(score) AS avg_score
FROM customers
GROUP BY country
HAVING AVG(score) > 430;

-- Combined WHERE and HAVING
SELECT
    country,
    AVG(score) AS avg_score
FROM customers
WHERE score != 0  -- Filter before grouping
GROUP BY country
HAVING AVG(score) > 430;  -- Filter after grouping
```

> [!note] WHERE vs HAVING
> 
> - **WHERE**: Filters individual rows before grouping
> - **HAVING**: Filters grouped results after aggregation

---

## Unique Values

### DISTINCT Keyword

Remove duplicate values from results:

```sql
-- Return unique list of all countries
SELECT DISTINCT country
FROM customers;
```

---

## Limiting Results

### TOP Clause

Limit the number of rows returned:

```sql
-- Retrieve only 3 customers
SELECT TOP 3 *
FROM customers;

-- Top 3 customers with highest scores
SELECT TOP 3 *
FROM customers
ORDER BY score DESC;

-- Bottom 2 customers by score
SELECT TOP 2 *
FROM customers
ORDER BY score ASC;

-- Most recent orders
SELECT TOP 2 *
FROM orders
ORDER BY order_date DESC;
```

---

## Complex Queries

### Comprehensive Example

Combining multiple clauses for complex data analysis:

```sql
-- Calculate average score by country with conditions
SELECT
    country,
    AVG(score) AS avg_score
FROM customers
WHERE score != 0              -- 1. Filter individual rows
GROUP BY country              -- 2. Group by country
HAVING AVG(score) > 430       -- 3. Filter grouped results
ORDER BY AVG(score) DESC;     -- 4. Sort final results
```

**Query Execution Order:**

1. **WHERE** - Filter individual rows
2. **GROUP BY** - Group remaining rows
3. **HAVING** - Filter groups
4. **ORDER BY** - Sort final results
5. **TOP** - Limit results (if used)

---

## Advanced Features

### Multiple Queries

Execute multiple queries in one statement:

```sql
SELECT * FROM customers;
SELECT * FROM orders;
```

### Static Data Selection

Select constant values without accessing tables:

```sql
-- Static number
SELECT 123 AS static_number;

-- Static string
SELECT 'Hello' AS static_string;

-- Add constant column to query
SELECT
    id,
    first_name,
    'New Customer' AS customer_type
FROM customers;
```

---

## Quick Reference

|Clause|Purpose|Example|
|---|---|---|
|SELECT|Choose columns|`SELECT name, age`|
|FROM|Specify table|`FROM customers`|
|WHERE|Filter rows|`WHERE age > 18`|
|GROUP BY|Group rows|`GROUP BY country`|
|HAVING|Filter groups|`HAVING COUNT(*) > 5`|
|ORDER BY|Sort results|`ORDER BY name ASC`|
|DISTINCT|Remove duplicates|`SELECT DISTINCT country`|
|TOP|Limit results|`SELECT TOP 10 *`|

---

## Tags

#sql #database #query #select #filtering #sorting #aggregation