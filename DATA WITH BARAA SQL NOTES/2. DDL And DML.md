# SQL Data Definition Language (DDL) & Data Manipulation Language (DML)

A comprehensive guide covering DDL commands for managing database structures and DML commands for manipulating data within tables.

## Table of Contents

### Data Definition Language (DDL)

- [[#CREATE - Creating Tables|CREATE - Creating Tables]]
- [[#ALTER - Modifying Table Structure|ALTER - Modifying Table Structure]]
- [[#DROP - Removing Tables|DROP - Removing Tables]]

### Data Manipulation Language (DML)

- [[#INSERT - Adding Data to Tables|INSERT - Adding Data to Tables]]
- [[#UPDATE - Modifying Existing Data|UPDATE - Modifying Existing Data]]
- [[#DELETE - Removing Data from Tables|DELETE - Removing Data from Tables]]

---

# Data Definition Language (DDL)

DDL commands are used to define and manage the structure of database objects like tables, indexes, and constraints.

## CREATE - Creating Tables

### Basic Table Creation

Create a new table with columns and constraints:

```sql
-- Create a new table called persons
CREATE TABLE persons (
    id INT NOT NULL,
    person_name VARCHAR(50) NOT NULL,
    birth_date DATE,
    phone VARCHAR(15) NOT NULL,
    CONSTRAINT pk_persons PRIMARY KEY (id)
);
```

> [!note] Column Constraints
> 
> - **NOT NULL**: Column cannot contain empty values
> - **PRIMARY KEY**: Unique identifier for each row
> - **VARCHAR(n)**: Variable-length string with maximum n characters
> - **DATE**: Date data type
> - **INT**: Integer data type

---

## ALTER - Modifying Table Structure

### Adding Columns

Add new columns to an existing table:

```sql
-- Add a new column called email to the persons table
ALTER TABLE persons
ADD email VARCHAR(50) NOT NULL;
```

### Removing Columns

Remove columns from an existing table:

```sql
-- Remove the column phone from the persons table
ALTER TABLE persons
DROP COLUMN phone;
```

> [!warning] Data Loss Warning Dropping a column permanently removes all data in that column. This action cannot be undone.

---

## DROP - Removing Tables

### Delete Entire Table

Remove a table and all its data from the database:

```sql
-- Delete the table persons from the database
DROP TABLE persons;
```

> [!danger] Irreversible Action DROP TABLE completely removes the table structure and all data. Use with extreme caution.

---

# Data Manipulation Language (DML)

DML commands are used to insert, update, and delete data within existing tables.

## INSERT - Adding Data to Tables

### Method 1: Manual INSERT using VALUES

#### Single Row Insert

```sql
-- Insert a new record with full column values
INSERT INTO customers (id, first_name, country, score)
VALUES (8, 'Max', 'USA', 368);
```

#### Multiple Row Insert

```sql
-- Insert multiple records at once
INSERT INTO customers (id, first_name, country, score)
VALUES 
    (6, 'Anna', 'USA', NULL),
    (7, 'Sam', NULL, 100);
```

#### Insert Without Column Names (Not Recommended)

```sql
-- Insert without specifying column names
INSERT INTO customers 
VALUES (9, 'Andreas', 'Germany', NULL);
```

#### Partial Column Insert

```sql
-- Insert with only some columns (others will be NULL or default)
INSERT INTO customers (id, first_name)
VALUES (10, 'Sahra');
```

### Common INSERT Errors

> [!warning] Common Mistakes
> 
> **Incorrect column order:**
> 
> ```sql
> -- ❌ Wrong: Values don't match column order
> INSERT INTO customers (id, first_name, country, score)
> VALUES (8, 'Max', 'USA', NULL);
> ```
> 
> **Incorrect data types:**
> 
> ```sql
> -- ❌ Wrong: String in INT column, number in VARCHAR column
> INSERT INTO customers (id, first_name, country, score)
> VALUES ('Max', 9, 'Max', NULL);
> ```

### Method 2: INSERT Using SELECT

Copy data from one table to another:

```sql
-- Copy data from 'customers' table into 'persons'
INSERT INTO persons (id, person_name, birth_date, phone)
SELECT
    id,
    first_name,
    NULL,
    'Unknown'
FROM customers;
```

> [!tip] INSERT SELECT Benefits
> 
> - Efficient for copying large amounts of data
> - Can transform data during the copy process
> - Useful for data migration and backup operations

---

## UPDATE - Modifying Existing Data

### Single Column Update

```sql
-- Change the score of customer with ID 6 to 0
UPDATE customers
SET score = 0
WHERE id = 6;
```

### Multiple Column Update

```sql
-- Update multiple columns for customer with ID 10
UPDATE customers
SET score = 0,
    country = 'UK'
WHERE id = 10;
```

### Conditional Updates

```sql
-- Update all customers with NULL score
UPDATE customers
SET score = 0
WHERE score IS NULL;

-- Verify the update
SELECT *
FROM customers
WHERE score IS NULL;
```

> [!warning] Always Use WHERE Clause Without a WHERE clause, UPDATE will modify ALL rows in the table. Always double-check your WHERE condition before executing.

---

## DELETE - Removing Data from Tables

### Conditional Delete

```sql
-- Preview what will be deleted
SELECT *
FROM customers
WHERE id > 5;

-- Delete specific records
DELETE FROM customers
WHERE id > 5;
```

### Delete All Data

```sql
-- Delete all data from the persons table
DELETE FROM persons;

-- Faster method for large tables
TRUNCATE TABLE persons;
```

### DELETE vs TRUNCATE

|Command|Speed|Rollback|Identity Reset|Triggers|
|---|---|---|---|---|
|DELETE|Slower|Yes|No|Fired|
|TRUNCATE|Faster|No|Yes|Not Fired|

> [!tip] When to Use Each
> 
> - **DELETE**: When you need to remove specific rows or might need to rollback
> - **TRUNCATE**: When removing all data from large tables for better performance

---

## DDL vs DML Summary

### Data Definition Language (DDL)

- **Purpose**: Define and modify database structure
- **Commands**: CREATE, ALTER, DROP
- **Target**: Tables, indexes, constraints
- **Auto-commit**: Usually commits automatically

### Data Manipulation Language (DML)

- **Purpose**: Manipulate data within tables
- **Commands**: INSERT, UPDATE, DELETE
- **Target**: Table rows and columns
- **Transaction control**: Can be rolled back

---

## Best Practices

### DDL Best Practices

1. **Plan schema carefully** - Structure changes can be disruptive
2. **Use meaningful names** - Clear table and column names
3. **Define constraints** - Ensure data integrity
4. **Backup before changes** - DDL operations can be irreversible

### DML Best Practices

1. **Always use WHERE clauses** - Prevent accidental mass updates/deletes
2. **Test with SELECT first** - Preview what will be affected
3. **Use transactions** - Group related operations
4. **Validate data types** - Ensure correct data formats

---

## Quick Reference

### DDL Commands

```sql
-- Create table
CREATE TABLE table_name (column definitions);

-- Add column
ALTER TABLE table_name ADD column_name data_type;

-- Drop column
ALTER TABLE table_name DROP COLUMN column_name;

-- Drop table
DROP TABLE table_name;
```

### DML Commands

```sql
-- Insert data
INSERT INTO table_name (columns) VALUES (values);

-- Update data
UPDATE table_name SET column = value WHERE condition;

-- Delete data
DELETE FROM table_name WHERE condition;

-- Truncate table
TRUNCATE TABLE table_name;
```

---

## Tags

#sql #database #ddl #dml #create #alter #drop #insert #update #delete #table-management #data-manipulation