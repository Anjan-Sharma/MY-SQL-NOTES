# SQL Data Filtering Guide

A comprehensive guide to SQL filtering techniques using WHERE clause and various operators for precise data retrieval and query optimization.

## Table of Contents

- [[#Comparison Operators|Comparison Operators]]
- [[#Logical Operators|Logical Operators]]
- [[#Range Filtering|Range Filtering]]
- [[#Set Filtering|Set Filtering]]
- [[#Pattern Matching|Pattern Matching]]
- [[#Advanced Filtering Tips|Advanced Filtering Tips]]

---

## Comparison Operators

Comparison operators are used to compare values in WHERE clauses for filtering data based on specific conditions.

### Equal To (=)

Find exact matches for column values:

```sql
-- Retrieve all customers from Germany
SELECT *
FROM customers
WHERE country = 'Germany';
```

### Not Equal To (<>)

Exclude records with specific values:

```sql
-- Retrieve all customers who are not from Germany
SELECT *
FROM customers
WHERE country <> 'Germany';
```

> [!note] Alternative Syntax You can also use `!=` instead of `<>` for "not equal to" in most SQL databases.

### Greater Than (>)

Find values above a specified threshold:

```sql
-- Retrieve all customers with a score greater than 500
SELECT *
FROM customers
WHERE score > 500;
```

### Greater Than or Equal To (>=)

Include the boundary value in your results:

```sql
-- Retrieve all customers with a score of 500 or more
SELECT *
FROM customers
WHERE score >= 500;
```

### Less Than (<)

Find values below a specified threshold:

```sql
-- Retrieve all customers with a score less than 500
SELECT *
FROM customers
WHERE score < 500;
```

### Less Than or Equal To (<=)

Include the boundary value in your results:

```sql
-- Retrieve all customers with a score of 500 or less
SELECT *
FROM customers
WHERE score <= 500;
```

### Comparison Operators Summary

|Operator|Description|Example|
|---|---|---|
|`=`|Equal to|`WHERE age = 25`|
|`<>` or `!=`|Not equal to|`WHERE status <> 'inactive'`|
|`>`|Greater than|`WHERE salary > 50000`|
|`>=`|Greater than or equal|`WHERE score >= 100`|
|`<`|Less than|`WHERE age < 18`|
|`<=`|Less than or equal|`WHERE price <= 999.99`|

---

## Logical Operators

Logical operators combine multiple conditions to create more complex filtering criteria.

### AND Operator

All conditions must be true for a record to be selected:

```sql
-- Retrieve customers from USA with score greater than 500
SELECT *
FROM customers
WHERE country = 'USA' AND score > 500;
```

### OR Operator

At least one condition must be true for a record to be selected:

```sql
-- Retrieve customers from USA OR with score greater than 500
SELECT *
FROM customers
WHERE country = 'USA' OR score > 500;
```

### NOT Operator

Negates a condition (returns opposite boolean value):

```sql
-- Retrieve all customers with score NOT less than 500
-- (equivalent to score >= 500)
SELECT *
FROM customers
WHERE NOT score < 500;
```

### Complex Logical Combinations

```sql
-- Multiple conditions with parentheses for clarity
SELECT *
FROM customers
WHERE (country = 'USA' OR country = 'Canada') 
  AND score > 300 
  AND NOT status = 'inactive';
```

> [!tip] Operator Precedence SQL follows this precedence order:
> 
> 1. Parentheses `()`
> 2. NOT
> 3. AND
> 4. OR
> 
> Use parentheses to make your intentions clear!

---

## Range Filtering

### BETWEEN Operator

Filter data within a specific range (inclusive of boundary values):

```sql
-- Retrieve customers with scores between 100 and 500 (inclusive)
SELECT *
FROM customers
WHERE score BETWEEN 100 AND 500;
```

### Alternative Range Method

Using comparison operators (equivalent to BETWEEN):

```sql
-- Same result as BETWEEN example above
SELECT *
FROM customers
WHERE score >= 100 AND score <= 500;
```

### BETWEEN with Dates

```sql
-- Find orders placed in a specific date range
SELECT *
FROM orders
WHERE order_date BETWEEN '2024-01-01' AND '2024-12-31';
```

### NOT BETWEEN

Exclude values within a range:

```sql
-- Find customers with scores outside the 100-500 range
SELECT *
FROM customers
WHERE score NOT BETWEEN 100 AND 500;
```

> [!important] BETWEEN Behavior
> 
> - BETWEEN is **inclusive** of both boundary values
> - Works with numbers, dates, and text
> - For text, it uses alphabetical order

---

## Set Filtering

### IN Operator

Check if a value matches any value in a specified list:

```sql
-- Retrieve customers from Germany or USA
SELECT *
FROM customers
WHERE country IN ('Germany', 'USA');
```

### Multiple Value Types

```sql
-- Find customers with specific IDs
SELECT *
FROM customers
WHERE customer_id IN (1, 5, 10, 15, 20);

-- Find orders with specific statuses
SELECT *
FROM orders
WHERE status IN ('pending', 'processing', 'shipped');
```

### NOT IN

Exclude records that match any value in the list:

```sql
-- Find customers NOT from Germany or USA
SELECT *
FROM customers
WHERE country NOT IN ('Germany', 'USA');
```

### IN vs OR Comparison

These queries are equivalent:

```sql
-- Using IN (preferred for readability)
SELECT * FROM customers
WHERE country IN ('Germany', 'USA', 'France');

-- Using OR (more verbose)
SELECT * FROM customers
WHERE country = 'Germany' 
   OR country = 'USA' 
   OR country = 'France';
```

> [!tip] Performance Tip IN is generally more readable and can be more efficient than multiple OR conditions, especially with large lists.

---

## Pattern Matching

### LIKE Operator

Search for patterns in text data using wildcards.

#### Wildcard Characters

|Wildcard|Description|Example|
|---|---|---|
|`%`|Matches zero or more characters|`'M%'` matches "Mike", "Mary", "M"|
|`_`|Matches exactly one character|`'_ohn'` matches "John", "Zohn"|

### Starts With Pattern

```sql
-- Find customers whose first name starts with 'M'
SELECT *
FROM customers
WHERE first_name LIKE 'M%';
```

### Ends With Pattern

```sql
-- Find customers whose first name ends with 'n'
SELECT *
FROM customers
WHERE first_name LIKE '%n';
```

### Contains Pattern

```sql
-- Find customers whose first name contains 'r'
SELECT *
FROM customers
WHERE first_name LIKE '%r%';
```

### Position-Specific Pattern

```sql
-- Find customers whose first name has 'r' in the third position
SELECT *
FROM customers
WHERE first_name LIKE '__r%';
-- This matches: "Andrew", "Martin" (r in 3rd position)
```

### Advanced Pattern Examples

```sql
-- Names starting with 'A' and exactly 5 characters long
SELECT * FROM customers
WHERE first_name LIKE 'A____';

-- Email addresses from Gmail
SELECT * FROM customers
WHERE email LIKE '%@gmail.com';

-- Phone numbers with specific area code
SELECT * FROM customers
WHERE phone LIKE '555-%';
```

### Case Sensitivity

> [!warning] Case Sensitivity LIKE behavior with case sensitivity depends on your database:
> 
> - **MySQL**: Case-insensitive by default
> - **PostgreSQL**: Case-sensitive by default
> - **SQL Server**: Depends on collation settings
> 
> Use `UPPER()` or `LOWER()` functions for consistent case-insensitive searches:
> 
> ```sql
> WHERE UPPER(first_name) LIKE 'M%'
> ```

---

## Advanced Filtering Tips

### Combining Multiple Filter Types

```sql
-- Complex filtering example
SELECT *
FROM customers
WHERE country IN ('USA', 'Canada')           -- Set filtering
  AND score BETWEEN 300 AND 800              -- Range filtering
  AND first_name LIKE 'J%'                   -- Pattern matching
  AND NOT status = 'inactive';               -- Logical negation
```

### NULL Value Handling

```sql
-- Find customers with NULL scores
SELECT * FROM customers
WHERE score IS NULL;

-- Find customers with non-NULL scores
SELECT * FROM customers
WHERE score IS NOT NULL;

-- NEVER use = or <> with NULL
-- ❌ Wrong: WHERE score = NULL
-- ✅ Correct: WHERE score IS NULL
```

### Performance Optimization

> [!tip] Query Performance Tips
> 
> **Index Usage:**
> 
> - Create indexes on frequently filtered columns
> - Comparison operators (`=`, `>`, `<`) use indexes efficiently
> - LIKE with leading wildcards (`%abc`) cannot use indexes
> 
> **Efficient Patterns:**
> 
> ```sql
> -- ✅ Good: Can use index
> WHERE name LIKE 'John%'
> 
> -- ❌ Avoid: Cannot use index
> WHERE name LIKE '%John%'
> ```

### Common Filtering Patterns

```sql
-- Date ranges (last 30 days)
SELECT * FROM orders
WHERE order_date >= DATEADD(day, -30, GETDATE());

-- Text search (case-insensitive)
SELECT * FROM products
WHERE UPPER(product_name) LIKE UPPER('%laptop%');

-- Multiple optional filters
SELECT * FROM customers
WHERE (@country IS NULL OR country = @country)
  AND (@min_score IS NULL OR score >= @min_score);
```

---

## Quick Reference Card

### Filter Types Quick Guide

```sql
-- Exact match
WHERE column = 'value'

-- Range
WHERE column BETWEEN 100 AND 500
WHERE column >= 100 AND column <= 500

-- Set membership
WHERE column IN ('value1', 'value2', 'value3')

-- Pattern matching
WHERE column LIKE 'pattern%'     -- Starts with
WHERE column LIKE '%pattern'     -- Ends with
WHERE column LIKE '%pattern%'    -- Contains

-- Null checks
WHERE column IS NULL
WHERE column IS NOT NULL

-- Logical combinations
WHERE condition1 AND condition2
WHERE condition1 OR condition2
WHERE NOT condition1
```

### Common Use Cases

|Scenario|SQL Pattern|Example|
|---|---|---|
|Find exact matches|`WHERE col = 'value'`|`WHERE status = 'active'`|
|Exclude values|`WHERE col <> 'value'`|`WHERE status <> 'deleted'`|
|Numeric ranges|`WHERE col BETWEEN x AND y`|`WHERE age BETWEEN 18 AND 65`|
|Multiple options|`WHERE col IN (list)`|`WHERE category IN ('A','B','C')`|
|Text search|`WHERE col LIKE 'pattern'`|`WHERE name LIKE 'John%'`|
|Null handling|`WHERE col IS NULL`|`WHERE email IS NOT NULL`|

---

## Tags

#sql #database #filtering #where-clause #comparison-operators #logical-operators #between #in #like #pattern-matching #data-retrieval